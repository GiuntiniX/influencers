<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Influenciadores</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚≠ê</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #a8a8a8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #f59e0b; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #influencer-modal { transition: opacity 0.3s ease-in-out; }
        #influencer-modal.show { opacity: 1; pointer-events: auto; }
        #modal-content { transition: transform 0.3s ease-in-out; }
        #influencer-modal.show #modal-content { transform: scale(1); }
        .instagram-icon { fill: url(#instagram-gradient); }
        #scrollTopBtn { transition: opacity 0.3s, transform 0.3s; }
        /* Estilos para o novo multi-select */
        .multi-select-dropdown {
            max-height: 250px;
            overflow-y: auto;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-100 via-orange-100 to-fuchsia-100 text-white">

<svg style="width:0;height:0;position:absolute;">
  <defs>
    <radialGradient id="instagram-gradient" cx="0.3" cy="1.2" r="1.2">
      <stop offset="0%" stop-color="#fdc162"/><stop offset="30%" stop-color="#f5813e"/><stop offset="60%" stop-color="#e1306c"/><stop offset="100%" stop-color="#833ab4"/>
    </radialGradient>
  </defs>
</svg>

<div class="container mx-auto p-4 md:p-8">
    <header class="text-center mb-10">
        <div class="flex justify-center items-center gap-4">
            <img src="https://github.com/GiuntiniX/influencers/blob/main/terra.png?raw=true" alt="Logo Terra" class="h-8 md:h-12 w-auto">
            <h1 class="text-3xl md:text-5xl font-bold text-purple-900">| Painel de Influenciadores</h1>
        </div>
        <p class="text-fuchsia-800 mt-3 text-lg">Encontre o influenciador ideal para sua campanha.</p>
        <div class="mt-4 flex justify-center space-x-4">
            <button id="show-influencers-btn" class="bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition-colors">Painel Principal</button>
            <button id="show-couples-btn" class="bg-fuchsia-600 text-white px-4 py-2 rounded-lg hover:bg-fuchsia-700 transition-colors">Casais de Influenciadores</button>
        </div>
    </header>

    <div id="main-panel">
        <div class="bg-white/80 backdrop-blur-sm p-6 rounded-xl shadow-lg mb-6 sticky top-4 z-10" id="filters-container">
            <div class="flex flex-col sm:flex-row gap-4 mb-6">
                <div class="relative flex-grow">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="w-5 h-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0-0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg></div>
                    <input type="text" id="search-input" class="w-full p-3 pl-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all duration-300 text-slate-800 placeholder-slate-400" placeholder="Buscar por nome...">
                </div>
                <button id="clear-filters-btn" class="flex-shrink-0 bg-slate-200 text-slate-700 px-4 py-2 rounded-lg hover:bg-slate-300 transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0-0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                    Limpar Filtros
                </button>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4" id="filters-grid">
                 </div>
        </div>
        <div class="mb-6 text-right"><p class="text-slate-600"><strong id="influencer-count" class="font-bold text-slate-800">0</strong> influenciadores encontrados</p></div>
        <div id="loader" class="flex justify-center items-center py-10"><div class="loader"></div></div>
        <div id="influencers-list" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
        <div id="loader-more" class="hidden justify-center items-center py-10"><div class="loader"></div></div>
        <p id="no-results" class="hidden text-center text-slate-500 mt-10 text-lg">Nenhum influenciador encontrado.</p>
    </div>

    <div id="couples-panel" class="hidden">
        <div class="bg-white/80 backdrop-blur-sm p-6 rounded-xl shadow-lg mb-6 sticky top-4 z-10" id="filters-container-couples">
            <div class="flex flex-col sm:flex-row gap-4 mb-6">
                <div class="relative flex-grow">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="w-5 h-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0-0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg></div>
                    <input type="text" id="search-input-couples" class="w-full p-3 pl-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all duration-300 text-slate-800 placeholder-slate-400" placeholder="Buscar por nome do casal ou membro...">
                </div>
                 <button id="clear-filters-couples-btn" class="flex-shrink-0 bg-slate-200 text-slate-700 px-4 py-2 rounded-lg hover:bg-slate-300 transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0-0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                    Limpar Filtros
                </button>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="filters-grid-couples">
                </div>
        </div>
        <div class="mb-6 text-right"><p class="text-slate-600"><strong id="couple-count" class="font-bold text-slate-800">0</strong> casais encontrados</p></div>
        
        <div id="couples-list" class="space-y-6"></div>
        <div id="loader-more-couples" class="hidden justify-center items-center py-10"><div class="loader"></div></div>
        <p id="no-results-couples" class="hidden text-center text-slate-500 mt-10 text-lg">Nenhum casal encontrado.</p>
    </div>
</div>

<div id="influencer-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 opacity-0 pointer-events-none transition-opacity duration-300">
</div>

<button id="scrollTopBtn" class="hidden fixed bottom-5 right-5 bg-purple-600 text-white p-3 rounded-full shadow-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transform hover:scale-110">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0-0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
    </svg>
</button>

<script src="dados.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    document.addEventListener('contextmenu', event => event.preventDefault());

    const colorPalette = ['bg-red-200 text-red-700', 'bg-orange-200 text-orange-700', 'bg-amber-200 text-amber-700', 'bg-yellow-200 text-yellow-700', 'bg-lime-200 text-lime-700', 'bg-green-200 text-green-700', 'bg-emerald-200 text-emerald-700', 'bg-teal-200 text-teal-700', 'bg-cyan-200 text-cyan-700', 'bg-sky-200 text-sky-700', 'bg-blue-200 text-blue-700', 'bg-indigo-200 text-indigo-700', 'bg-violet-200 text-violet-700', 'bg-purple-200 text-purple-700', 'bg-fuchsia-200 text-fuchsia-700', 'bg-pink-200 text-pink-700', 'bg-rose-200 text-rose-700'];
    const tagColorCache = {};

    function getTagColorClasses(tag) {
        if (tagColorCache[tag]) { return tagColorCache[tag]; }
        let hash = 0;
        for (let i = 0; i < tag.length; i++) { hash = tag.charCodeAt(i) + ((hash << 5) - hash); }
        const index = Math.abs(hash % colorPalette.length);
        tagColorCache[tag] = colorPalette[index];
        return tagColorCache[tag];
    }
    
    // --- ELEMENTOS DO PAINEL PRINCIPAL ---
    const mainPanel = document.getElementById('main-panel'),
          influencersList = document.getElementById('influencers-list'),
          loader = document.getElementById('loader'),
          loaderMore = document.getElementById('loader-more'),
          noResults = document.getElementById('no-results'),
          searchInput = document.getElementById('search-input'),
          influencerCount = document.getElementById('influencer-count'),
          filtersGrid = document.getElementById('filters-grid'),
          clearFiltersBtn = document.getElementById('clear-filters-btn');

    // --- ELEMENTOS DO PAINEL DE CASAIS ---
    const couplesPanel = document.getElementById('couples-panel'),
          couplesList = document.getElementById('couples-list'),
          loaderMoreCouples = document.getElementById('loader-more-couples'),
          noResultsCouples = document.getElementById('no-results-couples'),
          searchInputCouples = document.getElementById('search-input-couples'),
          coupleCount = document.getElementById('couple-count'),
          filtersGridCouples = document.getElementById('filters-grid-couples'),
          clearFiltersCouplesBtn = document.getElementById('clear-filters-couples-btn');
    
    // --- BOT√ïES ---
    const showInfluencersBtn = document.getElementById('show-influencers-btn'),
          showCouplesBtn = document.getElementById('show-couples-btn'),
          scrollTopBtn = document.getElementById('scrollTopBtn');

    let allInfluencers = [], allCouples = [];
    
    // --- ESTADO DO SCROLL INFINITO ---
    let currentFilteredInfluencers = [], currentPageInfluencers = 1, itemsPerPageInfluencers = 24, isLoadingInfluencers = false;
    let currentFilteredCouples = [], currentPageCouples = 1, itemsPerPageCouples = 4, isLoadingCouples = false;

    function parseFollowers(str) { if (!str || typeof str !== 'string' || str.trim() === '-') return 0; const c = str.toLowerCase().replace(',', '.').trim(); if (c.includes('m')) return parseFloat(c.replace('m', '')) * 1e6; if (c.includes('mil')) return parseFloat(c.replace('mil', '')) * 1e3; return parseFloat(c); }
    function formatNumber(num) { if (num === 0) return 'N/A'; if (num >= 1e6) return (num / 1e6).toFixed(1).replace('.0', '') + 'M'; if (num >= 1e3) return (num / 1e3).toFixed(0) + ' mil'; return num.toString(); }
    function parseOrcamento(str) { if (!str || typeof str !== 'string' || str.trim() === '-' || str.trim() === 'N/A') return 0; return parseFloat(String(str).replace(/R\$|R4|\./g, '').replace(',', '.').trim()); }
    
    function processData(data) {
        return data.filter(item => item && item.INFLUENCIADOR && item.INFLUENCIADOR.trim() !== "").map(item => {
            const followers = { ig: parseFollowers(item.IG), ttk: parseFollowers(item.TTK), yt: parseFollowers(item.YT) };
            let primarySocial = 'Instagram';
            if (followers.ttk > followers.ig && followers.ttk > followers.yt) primarySocial = 'TikTok';
            else if (followers.yt > followers.ig && followers.yt > followers.ttk) primarySocial = 'YouTube';
            const tagsSecundarias = item['SEGMENTO SECUND√ÅRIO'] ? item['SEGMENTO SECUND√ÅRIO'].split(',').map(tag => tag.trim().charAt(0).toUpperCase() + tag.trim().slice(1)) : [];
            return {'Influenciador': item.INFLUENCIADOR, '@': item['@'], 'IMAGEM_URL': item.IMAGEM_URL || '', 'IG': item.IG || 'N/A', 'TTK': item.TTK || 'N/A', 'YT': item.YT || 'N/A', 'Rede Social': primarySocial, 'FollowersIG': followers.ig, 'FollowersTTK': followers.ttk, 'FollowersYT': followers.yt, 'Segmento': item.SEGMENTO ? item.SEGMENTO.trim() : 'N/A', 'TagsSecundarias': tagsSecundarias, 'PROJETOS': item.PROJETOS ? item.PROJETOS.trim() : 'N/A', 'AG√äNCIA': item.AG√äNCIA ? item.AG√äNCIA.trim() : 'N/A', 'ESCOPO': item.ESCOPO ? item.ESCOPO.trim() : 'N/A', 'MINI BIO - INFLUENCIADOR': item['MINI BIO - INFLUENCIADOR'] ? item['MINI BIO - INFLUENCIADOR'].trim() : 'N/A', 'Or√ßamento (Aproximado)': (item['REF. VALOR'] || 'N/A').replace('R4 ', 'R$ '), 'valorNumericoOrcamento': parseOrcamento(item['REF. VALOR']), 'Link do Perfil': `https://instagram.com/${item['@']}`};
        });
    }

    function processCouplesData(data) {
        return data.map(couple => ({ ...couple, valorNumericoOrcamento: parseOrcamento(couple.REF_VALOR) }));
    }

    function createMultiSelectFilter(id, placeholder, emoji, options, parentElement, changeCallback) {
        const container = document.createElement('div');
        container.id = id;
        container.className = 'relative multi-select-container';
    
        const button = document.createElement('button');
        button.className = 'w-full p-2.5 pl-10 pr-8 text-left bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors appearance-none focus:outline-none focus:ring-2 focus:ring-amber-500 cursor-pointer text-slate-800 flex items-center justify-between';
        button.innerHTML = `<div class="flex items-center"><span class="absolute left-3 text-lg pointer-events-none">${emoji}</span><span class="truncate button-text">${placeholder}</span></div><div class="pointer-events-none"><svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0-0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></div>`;
        button.dataset.placeholder = placeholder;
    
        const dropdown = document.createElement('div');
        dropdown.className = 'multi-select-dropdown hidden absolute w-full mt-1 bg-white rounded-md shadow-lg z-20 border border-slate-200';
    
        options.forEach(option => {
            const optionEl = document.createElement('div');
            optionEl.className = 'p-2 hover:bg-slate-100';
            optionEl.innerHTML = `
                <label class="flex items-center space-x-2 cursor-pointer">
                    <input type="checkbox" value="${option.value || option}" class="form-checkbox h-4 w-4 rounded text-amber-600 focus:ring-amber-500 border-slate-300">
                    <span class="text-slate-700 select-none">${option.text || option}</span>
                </label>
            `;
            optionEl.querySelector('input').addEventListener('change', () => {
                updateMultiSelectButtonText(container);
                changeCallback();
            });
            dropdown.appendChild(optionEl);
        });
    
        container.appendChild(button);
        container.appendChild(dropdown);
        parentElement.appendChild(container);
    }
    
    function updateMultiSelectButtonText(container) {
        const button = container.querySelector('button');
        const buttonText = button.querySelector('.button-text');
        const checkedCount = container.querySelectorAll('input:checked').length;
        
        if (checkedCount > 0) {
            buttonText.textContent = `${button.dataset.placeholder} (${checkedCount})`;
        } else {
            buttonText.textContent = button.dataset.placeholder;
        }
    }

    document.addEventListener('click', (e) => {
        const containers = document.querySelectorAll('.multi-select-container');
        containers.forEach(container => {
            if (!container.contains(e.target)) {
                container.querySelector('.multi-select-dropdown').classList.add('hidden');
            } else {
                 if (e.target.closest('button')) {
                    container.querySelector('.multi-select-dropdown').classList.toggle('hidden');
                 }
            }
        });
    });

    function getSelectedValues(filterId) {
        const container = document.getElementById(filterId);
        if (!container) return [];
        const checked = container.querySelectorAll('input:checked');
        return Array.from(checked).map(cb => cb.value);
    }
    
    function populateFilters() {
        filtersGrid.innerHTML = '';
        const segmentos = [...new Set(allInfluencers.map(i => i.Segmento).filter(Boolean).filter(s => s !== 'N/A'))].sort();
        const segmentosSecundarios = [...new Set(allInfluencers.flatMap(i => i.TagsSecundarias).filter(Boolean))].sort();
        const projetos = [...new Set(allInfluencers.map(i => i.PROJETOS).filter(Boolean).filter(s => s !== 'N/A'))].sort();
        const agencias = [...new Set(allInfluencers.map(i => i.AG√äNCIA).filter(Boolean).filter(s => s !== 'N/A'))].sort();
        const plataformas = ['Instagram', 'TikTok', 'YouTube'];
        const orcamentos = [
            {value:'ate20k', text:'At√© R$ 20 mil'}, {value:'ate50k', text:'De R$20k a R$50k'},
            {value:'ate100k', text:'De R$50k a R$100k'}, {value:'mais100k', text:'+ de R$ 100 mil'}
        ];

        createMultiSelectFilter('segmento-filter', 'Segmento', 'üé®', segmentos, filtersGrid, applyFilters);
        createMultiSelectFilter('segmento-secundario-filter', 'Tags', '‚ú®', segmentosSecundarios, filtersGrid, applyFilters);
        createMultiSelectFilter('plataforma-filter', 'Rede Social', 'üì±', plataformas, filtersGrid, applyFilters);
        createMultiSelectFilter('orcamento-filter', 'Or√ßamento', 'üí∞', orcamentos.map(o => ({ value: o.value, text: o.text })), filtersGrid, applyFilters);
        createMultiSelectFilter('projetos-filter', 'Projetos', 'üöÄ', projetos, filtersGrid, applyFilters);
        createMultiSelectFilter('agencia-filter', 'Ag√™ncia', 'üè¢', agencias, filtersGrid, applyFilters);
    }

    function populateCouplesFilters() {
        filtersGridCouples.innerHTML = '';
        const segmentos = [...new Set(allCouples.flatMap(c => c.MEMBROS.flatMap(m => m.SEGMENTO ? m.SEGMENTO.split(',').map(s => s.trim()) : [])).filter(Boolean))].sort();
        const projetos = [...new Set(allCouples.map(c => c.PROJETOS).filter(p => p && p.trim() !== '-' && p.trim() !== 'N/A'))].sort();
        const agencias = [...new Set(allCouples.map(c => c.AGENCIA).filter(a => a && a.trim() !== '-' && a.trim() !== 'N/A'))].sort();
        const orcamentos = [
            {value:'ate20k', text:'At√© R$ 20 mil'}, {value:'ate50k', text:'De R$20k a R$50k'},
            {value:'ate100k', text:'De R$50k a R$100k'}, {value:'mais100k', text:'+ de R$ 100 mil'}
        ];

        createMultiSelectFilter('segmento-filter-couples', 'Segmento', 'üé®', segmentos, filtersGridCouples, applyCouplesFilters);
        createMultiSelectFilter('orcamento-filter-couples', 'Or√ßamento', 'üí∞', orcamentos.map(o => ({ value: o.value, text: o.text })), filtersGridCouples, applyCouplesFilters);
        createMultiSelectFilter('projetos-filter-couples', 'Projetos', 'üöÄ', projetos, filtersGridCouples, applyCouplesFilters);
        createMultiSelectFilter('agencia-filter-couples', 'Ag√™ncia', 'üè¢', agencias, filtersGridCouples, applyCouplesFilters);
    }

    function loadMoreInfluencers() {
        if (isLoadingInfluencers) return;
        isLoadingInfluencers = true;
        loaderMore.classList.remove('hidden');

        const start = (currentPageInfluencers - 1) * itemsPerPageInfluencers;
        const end = start + itemsPerPageInfluencers;
        const paginatedItems = currentFilteredInfluencers.slice(start, end);

        paginatedItems.forEach(influencer => {
            const name = influencer.Influenciador || '', initials = name.split(' ').map(n => n[0]).slice(0, 2).join('');
            let avatar = `<div class="w-full h-full flex items-center justify-center bg-slate-200"><span class="text-3xl font-bold text-slate-600">${initials}</span></div>`;
            if (influencer.IMAGEM_URL) avatar = `<img src="${influencer.IMAGEM_URL}" alt="${name}" class="w-full h-full object-cover">`;
            
            const arrobaHTML = `
                <div class="mt-1">
                    <a href="${influencer['Link do Perfil']}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 bg-fuchsia-100 text-fuchsia-800 rounded-full px-2.5 py-1 text-xs font-medium hover:bg-fuchsia-200 transition-colors">
                        <svg class="w-4 h-4" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.784.305-1.459.717-2.126 1.384S.935 3.356.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.785.718 1.46 1.384 2.126.667.666 1.341 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.785-.305 1.46-.718 2.126-1.384.666-.667 1.079-1.341 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.148-.558-2.913-.305-.784-.718-1.459-1.384-2.126C21.313.935 20.644.522 19.86.217 19.094-.083 18.225-.285 16.947-.344 15.667-.401 15.26-.417 12-.417h0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227a3.81 3.81 0 01-.899 1.382 3.81 3.81 0 01-1.38.899c-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421a3.81 3.81 0 01-1.381-.899 3.81 3.81 0 01-.899-1.38c-.164-.421-.36-1.065-.42-2.235-.058-1.274-.07-1.649-.07-4.859 0-3.211.015-3.586.07-4.859.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.422-.164 1.066-.36 2.235-.413 1.274-.057 1.65-.07 4.859-.07zM12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.338-9.87a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z" fill="currentColor"/></svg>
                        <span>${influencer['@']}</span>
                    </a>
                </div>
            `;
            let segmentAndTagsHTML = '<div class="mt-2 text-sm text-slate-500 flex items-center flex-wrap justify-center sm:justify-start gap-2">';
            if (influencer.Segmento && influencer.Segmento !== 'N/A') segmentAndTagsHTML += `<span class="font-semibold inline-block py-1 px-2.5 rounded-full text-xs bg-amber-100 text-amber-800">${influencer.Segmento}</span>`;
            const tagsToShow = influencer.TagsSecundarias.slice(0, 2), remainingTags = influencer.TagsSecundarias.length - 2;
            if (tagsToShow.length > 0) {
                if (influencer.Segmento && influencer.Segmento !== 'N/A') segmentAndTagsHTML += '<span class="text-slate-300 font-light">|</span>';
                tagsToShow.forEach(tag => segmentAndTagsHTML += `<span class="font-semibold inline-block py-0.5 px-2 rounded-full text-[11px] ${getTagColorClasses(tag)}">${tag}</span>`);
                if (remainingTags > 0) segmentAndTagsHTML += `<span class="font-semibold inline-block py-0.5 px-2 rounded-full text-[11px] bg-slate-200 text-slate-600">+${remainingTags}</span>`;
            }
            segmentAndTagsHTML += '</div>';
            
            let socialMediaHTML = '<div class="mt-3 flex justify-center sm:justify-start items-center gap-x-3">';
            if (influencer.FollowersIG > 0) socialMediaHTML += `<svg class="w-5 h-5 instagram-icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.784.305-1.459.717-2.126 1.384S.935 3.356.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.785.718 1.46 1.384 2.126.667.666 1.341 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.785-.305 1.46-.718 2.126-1.384.666-.667 1.079-1.341 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.148-.558-2.913-.305-.784-.718-1.459-1.384-2.126C21.313.935 20.644.522 19.86.217 19.094-.083 18.225-.285 16.947-.344 15.667-.401 15.26-.417 12-.417h0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227a3.81 3.81 0 01-.899 1.382 3.81 3.81 0 01-1.38.899c-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421a3.81 3.81 0 01-1.381-.899 3.81 3.81 0 01-.899-1.38c-.164-.421-.36-1.065-.42-2.235-.058-1.274-.07-1.649-.07-4.859 0-3.211.015-3.586.07-4.859.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.422-.164 1.066-.36 2.235-.413 1.274-.057 1.65-.07 4.859-.07zM12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.338-9.87a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z"/></svg>`;
            if (influencer.FollowersTTK > 0) socialMediaHTML += `<svg class="w-5 h-5" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000"><title>TikTok</title><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.05-4.84-.95-6.43-2.8-1.59-1.87-2.32-4.2-1.86-6.33.36-1.72 1.46-3.2 3.02-4.06.38-.2.77-.38 1.16-.52.06-1.57.02-3.14.01-4.71.13-2.59 1.91-4.86 4.42-5.63 1.25-.38 2.5-.45 3.75-.28z"/></svg>`;
            if (influencer.FollowersYT > 0) socialMediaHTML += `<svg class="w-5 h-5" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .498 6.186C0 8.07 0 12 0 12s0 3.93.498 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" fill="#FF0000"/></svg>`;
            socialMediaHTML += '</div>';

            const item = document.createElement('div');
            item.className = 'bg-white rounded-xl shadow-md p-4 flex flex-col sm:flex-row items-center sm:space-x-6 transition-all duration-300 hover:shadow-lg hover:ring-2 hover:ring-amber-500';
            item.innerHTML = `<div class="w-24 h-24 flex-shrink-0 rounded-full overflow-hidden bg-slate-200">${avatar}</div><div class="flex-grow text-center sm:text-left mt-4 sm:mt-0"><h3 class="text-xl font-bold text-slate-900">${name}</h3>${arrobaHTML}${segmentAndTagsHTML}${socialMediaHTML}</div><div class="flex-shrink-0 mt-4 sm:mt-0"><button class="details-btn w-full sm:w-auto text-sm bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition-colors">Ver Detalhes</button></div>`;
            item.querySelector('.details-btn').addEventListener('click', () => openModal(influencer));
            influencersList.appendChild(item);
        });
        
        currentPageInfluencers++;
        loaderMore.classList.add('hidden');
        isLoadingInfluencers = false;
    }

    function loadMoreCouples() {
        if (isLoadingCouples) return;
        isLoadingCouples = true;
        loaderMoreCouples.classList.remove('hidden');
        
        const start = (currentPageCouples - 1) * itemsPerPageCouples;
        const end = start + itemsPerPageCouples;
        const paginatedItems = currentFilteredCouples.slice(start, end);

        paginatedItems.forEach(couple => {
            const coupleCard = document.createElement('div');
            coupleCard.className = 'bg-white rounded-xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl hover:ring-2 hover:ring-amber-500';
            let membersHtml = '';
            couple.MEMBROS.forEach(member => {
                let avatarHtml = '';
                if (member.IMAGEM_URL) avatarHtml = `<img src="${member.IMAGEM_URL}" alt="Foto de ${member.NOME}" class="w-full h-full object-cover">`;
                else avatarHtml = `<div class="w-full h-full flex items-center justify-center bg-amber-100 text-amber-800"><span class="text-2xl font-bold">${member.NOME.split(' ').map(n=>n[0]).slice(0,2).join('')}</span></div>`;
                
                const arrobaHTML = `
                    <a href="https://instagram.com/${member['@']}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 mt-1 bg-fuchsia-100 text-fuchsia-800 rounded-full px-2.5 py-1 text-xs font-medium hover:bg-fuchsia-200 transition-colors">
                        <svg class="w-4 h-4" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.784.305-1.459.717-2.126 1.384S.935 3.356.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.785.718 1.46 1.384 2.126.667.666 1.341 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.785-.305 1.46-.718 2.126-1.384.666-.667 1.079-1.341 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.148-.558-2.913-.305-.784-.718-1.459-1.384-2.126C21.313.935 20.644.522 19.86.217 19.094-.083 18.225-.285 16.947-.344 15.667-.401 15.26-.417 12-.417h0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227a3.81 3.81 0 01-.899 1.382 3.81 3.81 0 01-1.38.899c-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421a3.81 3.81 0 01-1.381-.899 3.81 3.81 0 01-.899-1.38c-.164-.421-.36-1.065-.42-2.235-.058-1.274-.07-1.649-.07-4.859 0-3.211.015-3.586.07-4.859.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.422-.164 1.066-.36 2.235-.413 1.274-.057 1.65-.07 4.859-.07zM12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.338-9.87a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z" fill="currentColor"/></svg>
                        <span>${member['@']}</span>
                    </a>
                `;

                let socialIconsHtml = '<div class="mt-2 flex items-center gap-4 text-xs text-slate-700">';
                if (member.IG && member.IG.trim() !== '' && member.IG.trim() !== '-') {
                    socialIconsHtml += `<div class="flex items-center gap-1"><svg class="w-4 h-4 instagram-icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.784.305-1.459.717-2.126 1.384S.935 3.356.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.785.718 1.46 1.384 2.126.667.666 1.341 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.785-.305 1.46-.718 2.126-1.384.666-.667 1.079-1.341 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.148-.558-2.913-.305-.784-.718-1.459-1.384-2.126C21.313.935 20.644.522 19.86.217 19.094-.083 18.225-.285 16.947-.344 15.667-.401 15.26-.417 12-.417h0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227a3.81 3.81 0 01-.899 1.382 3.81 3.81 0 01-1.38.899c-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421a3.81 3.81 0 01-1.381-.899 3.81 3.81 0 01-.899-1.38c-.164-.421-.36-1.065-.42-2.235-.058-1.274-.07-1.649-.07-4.859 0-3.211.015-3.586.07-4.859.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.422-.164 1.066-.36 2.235-.413 1.274-.057 1.65-.07 4.859-.07zM12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.338-9.87a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z"/></svg><span class="font-semibold">${member.IG}</span></div>`;
                }
                if (member.TTK && member.TTK.trim() !== '' && member.TTK.trim() !== '-') {
                    socialIconsHtml += `<div class="flex items-center gap-1"><svg class="w-4 h-4" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000"><title>TikTok</title><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.05-4.84-.95-6.43-2.8-1.59-1.87-2.32-4.2-1.86-6.33.36-1.72 1.46-3.2 3.02-4.06.38-.2.77-.38 1.16-.52.06-1.57.02-3.14.01-4.71.13-2.59 1.91-4.86 4.42-5.63 1.25-.38 2.5-.45 3.75-.28z"/></svg><span class="font-semibold">${member.TTK}</span></div>`;
                }
                if (member.YT && member.YT.trim() !== '' && member.YT.trim() !== '-') {
                    socialIconsHtml += `<div class="flex items-center gap-1"><svg class="w-4 h-4" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .498 6.186C0 8.07 0 12 0 12s0 3.93.498 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" fill="#FF0000"/></svg><span class="font-semibold">${member.YT}</span></div>`;
                }
                socialIconsHtml += '</div>';

                let memberSegmentsHtml = '';
                if (member.SEGMENTO && member.SEGMENTO.trim() !== '' && member.SEGMENTO.trim() !== '-') {
                    memberSegmentsHtml = '<div class="mt-2 flex flex-wrap gap-1">';
                    member.SEGMENTO.split(',').forEach(seg => {
                        const trimmedSeg = seg.trim();
                        if (trimmedSeg) memberSegmentsHtml += `<span class="font-semibold inline-block py-0.5 px-2 rounded-full text-[11px] ${getTagColorClasses(trimmedSeg)}">${trimmedSeg}</span>`;
                    });
                    memberSegmentsHtml += '</div>';
                }
                membersHtml += `<div class="flex-1 min-w-[250px] bg-slate-50 p-4 rounded-lg flex flex-col justify-between"><div><div class="flex items-center space-x-4"><div class="w-16 h-16 flex-shrink-0 rounded-full overflow-hidden bg-slate-200">${avatarHtml}</div><div><h4 class="font-bold text-slate-900">${member.NOME}</h4>${arrobaHTML}</div></div>${socialIconsHtml}${memberSegmentsHtml}</div></div>`;
            });
            coupleCard.innerHTML = `<div class="mb-4 text-center sm:text-left"><h2 class="text-2xl font-bold text-purple-900">${couple.NOME_CASAL}</h2><p class="text-sm text-fuchsia-800">Ag√™ncia: ${couple.AGENCIA || 'N/A'}</p></div><div class="flex flex-wrap gap-4 mb-4">${membersHtml}</div><div class="bg-amber-50 border-l-4 border-amber-500 text-amber-800 p-4 rounded-r-lg"><p class="font-bold">Proposta:</p><p><strong class="font-semibold">Valor:</strong> ${couple.REF_VALOR || 'N/A'}</p><p><strong class="font-semibold">Projeto:</strong> ${couple.PROJETOS || 'N/A'}</p><p><strong class="font-semibold">Escopo:</strong> ${couple.ESCOPO || 'N/A'}</p></div>`;
            couplesList.appendChild(coupleCard);
        });
        
        currentPageCouples++;
        loaderMoreCouples.classList.add('hidden');
        isLoadingCouples = false;
    }

    function applyFilters() {
        const searchTerm = searchInput.value.toLowerCase();
        const segmentos = getSelectedValues('segmento-filter');
        const segmentosSecundarios = getSelectedValues('segmento-secundario-filter');
        const plataformas = getSelectedValues('plataforma-filter');
        const orcamentos = getSelectedValues('orcamento-filter');
        const projetos = getSelectedValues('projetos-filter');
        const agencias = getSelectedValues('agencia-filter');

        const filtered = allInfluencers.filter(i => {
            const matchSearch = (i.Influenciador.toLowerCase().includes(searchTerm) || i['@'].toLowerCase().includes(searchTerm));
            const matchSegmento = segmentos.length === 0 || segmentos.includes(i.Segmento);
            const matchSegmentoSecundario = segmentosSecundarios.length === 0 || segmentosSecundarios.some(tag => i.TagsSecundarias.includes(tag));
            const matchProjeto = projetos.length === 0 || projetos.includes(i.PROJETOS);
            const matchAgencia = agencias.length === 0 || agencias.includes(i.AG√äNCIA);
            
            const matchPlataforma = plataformas.length === 0 || plataformas.some(p => {
                if (p === 'Instagram') return i.FollowersIG > 0;
                if (p === 'TikTok') return i.FollowersTTK > 0;
                if (p === 'YouTube') return i.FollowersYT > 0;
                return false;
            });

            const matchOrcamento = orcamentos.length === 0 || orcamentos.some(o => {
                const valor = i.valorNumericoOrcamento;
                switch (o) {
                    case 'ate20k': return valor > 0 && valor <= 20000;
                    case 'ate50k': return valor > 20000 && valor <= 50000;
                    case 'ate100k': return valor > 50000 && valor <= 100000;
                    case 'mais100k': return valor > 100000;
                    default: return false;
                }
            });

            return matchSearch && matchSegmento && matchSegmentoSecundario && matchPlataforma && matchOrcamento && matchProjeto && matchAgencia;
        });
        filtered.sort((a, b) => b.FollowersIG - a.FollowersIG);
        
        currentFilteredInfluencers = filtered;
        influencerCount.textContent = currentFilteredInfluencers.length;
        noResults.classList.toggle('hidden', currentFilteredInfluencers.length > 0);
        influencersList.innerHTML = '';
        currentPageInfluencers = 1;
        loader.style.display = 'none';
        loadMoreInfluencers();
    }

    function applyCouplesFilters() {
        const searchTerm = searchInputCouples.value.toLowerCase();
        const segmentos = getSelectedValues('segmento-filter-couples');
        const orcamentos = getSelectedValues('orcamento-filter-couples');
        const projetos = getSelectedValues('projetos-filter-couples');
        const agencias = getSelectedValues('agencia-filter-couples');

        const filtered = allCouples.filter(couple => {
            const searchMatch = !searchTerm || couple.NOME_CASAL.toLowerCase().includes(searchTerm) || couple.MEMBROS.some(m => m.NOME.toLowerCase().includes(searchTerm) || m['@'].toLowerCase().includes(searchTerm));
            const segmentoMatch = segmentos.length === 0 || couple.MEMBROS.some(m => m.SEGMENTO && segmentos.some(s => m.SEGMENTO.includes(s)));
            const projetoMatch = projetos.length === 0 || projetos.includes(couple.PROJETOS);
            const agenciaMatch = agencias.length === 0 || agencias.includes(couple.AGENCIA);
            
            const orcamentoMatch = orcamentos.length === 0 || orcamentos.some(o => {
                const valor = couple.valorNumericoOrcamento;
                switch (o) {
                    case 'ate20k': return valor > 0 && valor <= 20000;
                    case 'ate50k': return valor > 20000 && valor <= 50000;
                    case 'ate100k': return valor > 50000 && valor <= 100000;
                    case 'mais100k': return valor > 100000;
                    default: return false;
                }
            });
            
            return searchMatch && segmentoMatch && projetoMatch && agenciaMatch && orcamentoMatch;
        });
        filtered.sort((a, b) => b.valorNumericoOrcamento - a.valorNumericoOrcamento);

        currentFilteredCouples = filtered;
        coupleCount.textContent = currentFilteredCouples.length;
        noResultsCouples.classList.toggle('hidden', currentFilteredCouples.length > 0);
        couplesList.innerHTML = '';
        currentPageCouples = 1;
        loadMoreCouples();
    }
    
    function setupClearButton(button, gridContainer, searchInput, applyFn) {
        button.addEventListener('click', () => {
            searchInput.value = '';
            const filterContainers = gridContainer.querySelectorAll('.multi-select-container');
            filterContainers.forEach(container => {
                container.querySelectorAll('input:checked').forEach(checkbox => {
                    checkbox.checked = false;
                });
                updateMultiSelectButtonText(container);
            });
            applyFn();
        });
    }

    searchInput.addEventListener('input', applyFilters);
    searchInputCouples.addEventListener('input', applyCouplesFilters);
    
    window.addEventListener('scroll', () => {
        if (window.scrollY > 300) scrollTopBtn.classList.remove('hidden');
        else scrollTopBtn.classList.add('hidden');

        const isNearBottom = window.innerHeight + window.scrollY >= document.documentElement.scrollHeight - 200;
        
        if (isNearBottom) {
            if (!mainPanel.classList.contains('hidden') && (currentPageInfluencers - 1) * itemsPerPageInfluencers < currentFilteredInfluencers.length) {
                loadMoreInfluencers();
            } else if (!couplesPanel.classList.contains('hidden') && (currentPageCouples - 1) * itemsPerPageCouples < currentFilteredCouples.length) {
                loadMoreCouples();
            }
        }
    });
    
    scrollTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    const modal=document.getElementById('influencer-modal');
    function openModal(influencer){modal.innerHTML=`<div id="modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col md:flex-row transform scale-95 transition-transform duration-300"><div id="modal-img-container" class="w-full md:w-1/3 flex-shrink-0"></div><div class="p-8 flex-grow relative"><button id="modal-close-btn" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800 transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0-0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button><h2 id="modal-name" class="text-3xl font-bold mb-2 text-purple-900"></h2><div id="modal-segmento-container" class="mb-6"></div><div class="grid grid-cols-2 sm:grid-cols-3 gap-x-6 gap-y-4 mb-6 text-sm"><div id="modal-ig-container"><div class="flex items-center space-x-2"><svg class="w-5 h-5 instagram-icon" role="img" viewBox="0 0 24 24"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.784.305-1.459.717-2.126 1.384S.935 3.356.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.785.718 1.46 1.384 2.126.667.666 1.341 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.785-.305 1.46-.718 2.126-1.384.666-.667 1.079-1.341 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.148-.558-2.913-.305-.784-.718-1.459-1.384-2.126C21.313.935 20.644.522 19.86.217 19.094-.083 18.225-.285 16.947-.344 15.667-.401 15.26-.417 12-.417h0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227a3.81 3.81 0 01-.899 1.382 3.81 3.81 0 01-1.38.899c-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421a3.81 3.81 0 01-1.381-.899 3.81 3.81 0 01-.899-1.38c-.164-.421-.36-1.065-.42-2.235-.058-1.274-.07-1.649-.07-4.859 0-3.211.015-3.586.07-4.859.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.422-.164 1.066-.36 2.235-.413 1.274-.057 1.65-.07 4.859-.07zM12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.338-9.87a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z"/></svg><p class="font-bold text-slate-800" id="modal-ig"></p></div><p class="text-slate-500 pl-7">Instagram</p></div><div id="modal-ttk-container"><div class="flex items-center space-x-2"><svg class="w-5 h-5" role="img" viewBox="0 0 24 24" fill="#000000"><title>TikTok</title><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.05-4.84-.95-6.43-2.8-1.59-1.87-2.32-4.2-1.86-6.33.36-1.72 1.46-3.2 3.02-4.06.38-.2.77-.38 1.16-.52.06-1.57.02-3.14.01-4.71.13-2.59 1.91-4.86 4.42-5.63 1.25-.38 2.5-.45 3.75-.28z"/></svg><p class="font-bold text-slate-800" id="modal-ttk"></p></div><p class="text-slate-500 pl-7">TikTok</p></div><div id="modal-yt-container"><div class="flex items-center space-x-2"><svg class="w-5 h-5" role="img" viewBox="0 0 24 24"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .498 6.186C0 8.07 0 12 0 12s0 3.93.498 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" fill="#FF0000"/></svg><p class="font-bold text-slate-800" id="modal-yt"></p></div><p class="text-slate-500 pl-7">YouTube</p></div><div><p class="font-bold text-slate-800" id="modal-orcamento"></p><p class="text-slate-500">Or√ßamento</p></div><div><p class="font-bold text-slate-800" id="modal-projeto"></p><p class="text-slate-500">Projeto</p></div><div><p class="font-bold text-slate-800" id="modal-agencia"></p><p class="text-slate-500">Ag√™ncia</p></div></div><div id="modal-escopo-container" class="mt-4"><h3 class="font-bold text-slate-800 mb-2">Escopo</h3><p id="modal-escopo" class="text-slate-600 text-base italic"></p></div><h3 class="font-bold text-slate-800 mb-2 mt-4">Mini Bio</h3><p id="modal-bio" class="text-slate-600 text-base leading-relaxed"></p></div></div>`;
    document.getElementById('modal-name').textContent=influencer.Influenciador;let modalSegmentHTML=`<p class="font-semibold text-lg bg-amber-100 text-amber-800 py-1 px-3 rounded-lg inline-block">${influencer.Segmento}</p>`;if(influencer.TagsSecundarias.length>0){modalSegmentHTML+='<div class="mt-3 flex flex-wrap gap-2">';influencer.TagsSecundarias.forEach(tag=>{modalSegmentHTML+=`<span class="font-semibold inline-block py-0.5 px-2 rounded-full text-[11px] ${getTagColorClasses(tag)}">${tag}</span>`});modalSegmentHTML+='</div>'}document.getElementById('modal-segmento-container').innerHTML=modalSegmentHTML;document.getElementById('modal-escopo').textContent=influencer.ESCOPO;document.getElementById('modal-bio').textContent=influencer['MINI BIO - INFLUENCIADOR'];const modalImgContainer=document.getElementById('modal-img-container');if(influencer.IMAGEM_URL){modalImgContainer.innerHTML=`<img src="${influencer.IMAGEM_URL}" alt="${influencer.Influenciador}" class="w-full h-full object-cover md:rounded-l-2xl rounded-t-2xl md:rounded-t-none">`}else{const name=influencer.Influenciador||'',initials=name.split(' ').map(n=>n[0]).slice(0,2).join('');modalImgContainer.innerHTML=`<div class="w-full h-48 md:h-full flex items-center justify-center bg-amber-100 text-amber-800 md:rounded-l-2xl rounded-t-2xl md:rounded-t-none"><span class="text-7xl font-bold">${initials}</span></div>`}
    document.getElementById('modal-ig-container').style.display=influencer.FollowersIG>0?'block':'none';document.getElementById('modal-ttk-container').style.display=influencer.FollowersTTK>0?'block':'none';document.getElementById('modal-yt-container').style.display=influencer.FollowersYT>0?'block':'none';document.getElementById('modal-ig').textContent=formatNumber(influencer.FollowersIG);document.getElementById('modal-ttk').textContent=formatNumber(influencer.FollowersTTK);document.getElementById('modal-yt').textContent=formatNumber(influencer.FollowersYT);document.getElementById('modal-orcamento').textContent=influencer['Or√ßamento (Aproximado)'];document.getElementById('modal-projeto').textContent=influencer.PROJETOS;document.getElementById('modal-agencia').textContent=influencer.AG√äNCIA;const closeModalBtn=document.getElementById('modal-close-btn');closeModalBtn.addEventListener('click',closeModal);modal.addEventListener('click',e=>{if(e.target===modal)closeModal()});modal.classList.remove('hidden');setTimeout(()=>modal.classList.add('show'),10)}
    function closeModal(){const modal=document.getElementById('influencer-modal');modal.classList.remove('show');setTimeout(()=>{modal.innerHTML='';modal.classList.add('hidden')},300)}
    
    showInfluencersBtn.addEventListener('click',()=>{mainPanel.classList.remove('hidden');couplesPanel.classList.add('hidden');showInfluencersBtn.classList.add('bg-amber-600','text-white');showInfluencersBtn.classList.remove('bg-fuchsia-600','text-white');showCouplesBtn.classList.add('bg-fuchsia-600','text-white');showCouplesBtn.classList.remove('bg-amber-600','text-white')});
    showCouplesBtn.addEventListener('click',()=>{mainPanel.classList.add('hidden');couplesPanel.classList.remove('hidden');showCouplesBtn.classList.add('bg-amber-600','text-white');showCouplesBtn.classList.remove('bg-fuchsia-600','text-white');showInfluencersBtn.classList.add('bg-fuchsia-600','text-white');showInfluencersBtn.classList.remove('bg-amber-600','text-white'); applyCouplesFilters(); });

    // --- INICIALIZA√á√ÉO ---
    allInfluencers = processData(rawData);
    allCouples = processCouplesData(couplesData); 

    populateFilters();
    populateCouplesFilters(); 
    
    setupClearButton(clearFiltersBtn, filtersGrid, searchInput, applyFilters);
    setupClearButton(clearFiltersCouplesBtn, filtersGridCouples, searchInputCouples, applyCouplesFilters);

    applyFilters();
});
</script>

</body>
</html>
